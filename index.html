<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–û–ª–∏–º–ø–∏–∫ ‚Ä¢ –ü–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏–µ</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>‚ö°</text></svg>">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #00f0ff;
            --primary-glow: rgba(0, 240, 255, 0.4);
            --secondary: #ff3eb5;
            --secondary-glow: rgba(255, 62, 181, 0.4);
            --accent: #a0e400;
            --accent-glow: rgba(160, 228, 0, 0.3);
            --dark-bg: #0a0c12;
            --card-bg: rgba(18, 22, 30, 0.7);
            --card-border: rgba(255, 255, 255, 0.05);
            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.7);
            --text-tertiary: rgba(255, 255, 255, 0.4);
            --success: #a0e400;
            --warning: #ffb86b;
            --danger: #ff5555;
            --transition: all 0.3s cubic-bezier(0.2, 0.9, 0.3, 1.1);
            --border-radius: 28px;
            --border-radius-sm: 18px;
            --shadow: 0 25px 40px -15px rgba(0, 0, 0, 0.4);
            --glass-border: 1px solid rgba(255, 255, 255, 0.05);
            --blur: blur(20px);
        }

        .light-theme {
            --primary: #0066ff;
            --primary-glow: rgba(0, 102, 255, 0.2);
            --secondary: #d40078;
            --secondary-glow: rgba(212, 0, 120, 0.15);
            --accent: #56b400;
            --accent-glow: rgba(86, 180, 0, 0.2);
            --dark-bg: #f5f9ff;
            --card-bg: rgba(255, 255, 255, 0.6);
            --card-border: rgba(0, 0, 0, 0.03);
            --text-primary: #0a0c12;
            --text-secondary: rgba(10, 12, 18, 0.7);
            --text-tertiary: rgba(10, 12, 18, 0.4);
            --glass-border: 1px solid rgba(255, 255, 255, 0.6);
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--dark-bg);
            color: var(--text-primary);
            min-height: 100vh;
            transition: background 0.4s ease, color 0.3s ease;
            overflow-x: hidden;
            line-height: 1.6;
        }

        /* –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–µ—Ç–∫–∞ –Ω–∞ —Ñ–æ–Ω–µ */
        .bg-grid {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(var(--primary) 0.5px, transparent 0.5px),
                linear-gradient(var(--primary) 0.5px, transparent 0.5px);
            background-size: 50px 50px;
            background-position: 0 0, 25px 25px;
            opacity: 0.03;
            pointer-events: none;
            z-index: 0;
        }

        /* –ü–ª–∞–≤–∞—é—â–∏–µ –Ω–µ–æ–Ω–æ–≤—ã–µ —Å—Ñ–µ—Ä—ã */
        .floating-orb {
            position: fixed;
            border-radius: 50%;
            filter: blur(80px);
            pointer-events: none;
            z-index: 0;
            opacity: 0.4;
            animation: floatOrb 25s infinite alternate ease-in-out;
        }

        .orb1 {
            top: 5%;
            left: 5%;
            width: 300px;
            height: 300px;
            background: radial-gradient(circle at 30% 30%, var(--primary), transparent 70%);
        }

        .orb2 {
            bottom: 5%;
            right: 5%;
            width: 400px;
            height: 400px;
            background: radial-gradient(circle at 70% 70%, var(--secondary), transparent 70%);
            animation-delay: -5s;
        }

        .orb3 {
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 500px;
            height: 500px;
            background: radial-gradient(circle, var(--accent), transparent 70%);
            opacity: 0.2;
            animation: floatOrb2 35s infinite alternate;
        }

        @keyframes floatOrb {
            0% { transform: translate(0, 0) scale(1); }
            100% { transform: translate(60px, 60px) scale(1.1); }
        }

        @keyframes floatOrb2 {
            0% { transform: translate(-50%, -50%) scale(1); opacity: 0.2; }
            100% { transform: translate(-40%, -40%) scale(1.2); opacity: 0.25; }
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 10;
        }

        /* –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ö–µ–¥–µ—Ä —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–Ω–æ–π –æ–±–≤–æ–¥–∫–æ–π */
        header {
            text-align: center;
            padding: 50px 30px;
            background: var(--card-bg);
            backdrop-filter: var(--blur);
            -webkit-backdrop-filter: var(--blur);
            border-radius: var(--border-radius);
            margin-bottom: 40px;
            border: var(--glass-border);
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
        }

        header::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--secondary), var(--accent), var(--primary));
            background-size: 300% 100%;
            animation: gradientShift 6s ease infinite;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        h1 {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 5rem;
            font-weight: 700;
            margin-bottom: 15px;
            letter-spacing: -0.02em;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 60%, var(--accent) 100%);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 0 30px var(--primary-glow);
        }

        .subtitle {
            font-size: 1.3rem;
            color: var(--text-secondary);
            font-weight: 300;
            margin-bottom: 10px;
        }

        .tagline {
            font-size: 1rem;
            color: var(--text-tertiary);
            text-transform: uppercase;
            letter-spacing: 4px;
            font-weight: 500;
        }

        /* –ö–Ω–æ–ø–∫–∞ —Ç–µ–º—ã ‚Äî –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è */
        .theme-toggle {
            position: fixed;
            top: 25px;
            right: 25px;
            width: 55px;
            height: 55px;
            border-radius: 18px;
            background: var(--card-bg);
            backdrop-filter: var(--blur);
            -webkit-backdrop-filter: var(--blur);
            border: var(--glass-border);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-primary);
            font-size: 1.6rem;
            cursor: pointer;
            z-index: 100;
            transition: var(--transition);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .theme-toggle:hover {
            border-color: var(--primary);
            color: var(--primary);
            transform: scale(0.95);
        }

        /* –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω ‚Äî –≤—ã–±–æ—Ä –ø—Ä–µ–¥–º–µ—Ç–∞ */
        .screen {
            background: var(--card-bg);
            backdrop-filter: var(--blur);
            -webkit-backdrop-filter: var(--blur);
            border-radius: var(--border-radius);
            padding: 45px;
            border: var(--glass-border);
            box-shadow: var(--shadow);
            margin-bottom: 40px;
            display: none;
            animation: fadeSlide 0.5s ease-out;
            position: relative;
            overflow: hidden;
        }

        @keyframes fadeSlide {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .screen.active {
            display: block;
        }

        h2 {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 2.4rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 30px;
            letter-spacing: -0.01em;
        }

        /* –ö–∞—Ä—Ç–æ—á–∫–∏ ‚Äî —Å—Ç–µ–∫–ª–æ, –Ω–µ–æ–Ω–æ–≤–∞—è –æ–±–≤–æ–¥–∫–∞ –ø—Ä–∏ —Ö–æ–≤–µ—Ä–µ */
        .selection-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }

        .selection-card {
            background: var(--card-bg);
            backdrop-filter: var(--blur);
            -webkit-backdrop-filter: var(--blur);
            border-radius: var(--border-radius-sm);
            padding: 45px 30px;
            text-align: center;
            border: 1px solid transparent;
            border-image: none;
            transition: var(--transition);
            cursor: pointer;
            position: relative;
            box-shadow: 0 10px 30px -10px rgba(0,0,0,0.2);
        }

        .selection-card::before {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: inherit;
            padding: 2px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .selection-card:hover::before {
            opacity: 1;
        }

        .selection-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px -10px rgba(0, 240, 255, 0.2);
        }

        .selection-card i {
            font-size: 4.5rem;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 20px;
        }

        .selection-card h3 {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 2rem;
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--text-primary);
        }

        .selection-card p {
            color: var(--text-secondary);
            font-size: 1rem;
            line-height: 1.7;
        }

        /* –ö–Ω–æ–ø–∫–∏ ‚Äî –æ–±—ä–µ–º–Ω—ã–µ, —Å –Ω–µ–æ–Ω–æ–≤—ã–º —Å–≤–µ—á–µ–Ω–∏–µ–º */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            background: linear-gradient(135deg, var(--primary), #0088cc);
            color: white;
            border: none;
            padding: 18px 40px;
            border-radius: 40px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: 0 10px 20px -5px var(--primary-glow);
            font-family: 'Space Grotesk', sans-serif;
            letter-spacing: 0.5px;
            position: relative;
            overflow: hidden;
        }

        .btn::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transform: translateX(-100%);
            transition: 0.5s;
        }

        .btn:hover::after {
            transform: translateX(100%);
        }

        .btn:hover {
            transform: scale(1.02);
            box-shadow: 0 15px 30px -5px var(--primary-glow);
        }

        .btn-secondary {
            background: linear-gradient(135deg, var(--secondary), #b3006d);
            box-shadow: 0 10px 20px -5px var(--secondary-glow);
        }

        .btn-accent {
            background: linear-gradient(135deg, var(--accent), #6eb400);
            box-shadow: 0 10px 20px -5px var(--accent-glow);
        }

        .btn:disabled {
            opacity: 0.5;
            box-shadow: none;
            transform: none !important;
            cursor: not-allowed;
        }

        /* –¢–∞–π–º–µ—Ä ‚Äî –Ω–µ–æ–Ω–æ–≤—ã–π —â–∏—Ç */
        .timer {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 4.5rem;
            font-weight: 700;
            text-align: center;
            padding: 30px;
            background: rgba(0,0,0,0.2);
            backdrop-filter: blur(15px);
            border-radius: 60px;
            margin: 30px 0;
            color: var(--primary);
            text-shadow: 0 0 30px var(--primary);
            border: 1px solid rgba(255,255,255,0.05);
            letter-spacing: 5px;
        }

        /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤–æ–ø—Ä–æ—Å–∞ —Å –∞–∫—Ü–µ–Ω—Ç–Ω–æ–π –ø–æ–ª–æ—Å–æ–π */
        .question-container {
            background: rgba(0,0,0,0.15);
            backdrop-filter: blur(15px);
            border-radius: var(--border-radius);
            padding: 45px;
            margin: 30px 0;
            border: 1px solid rgba(255,255,255,0.02);
            position: relative;
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
        }

        .question-container::before {
            content: '';
            position: absolute;
            top: 20px;
            left: 20px;
            width: 60px;
            height: 60px;
            border-left: 3px solid var(--primary);
            border-top: 3px solid var(--primary);
            border-radius: 12px 0 0 0;
            opacity: 0.3;
        }

        .question-container::after {
            content: '';
            position: absolute;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            border-right: 3px solid var(--secondary);
            border-bottom: 3px solid var(--secondary);
            border-radius: 0 0 12px 0;
            opacity: 0.3;
        }

        .question-text {
            font-size: 1.9rem;
            line-height: 1.6;
            margin-bottom: 30px;
            color: var(--text-primary);
            font-weight: 500;
            font-family: 'Space Grotesk', sans-serif;
        }

        .answer-type {
            font-size: 1.1rem;
            color: var(--warning);
            margin-bottom: 15px;
            font-weight: 500;
            display: inline-block;
            padding: 8px 20px;
            background: rgba(255, 184, 107, 0.05);
            border-radius: 40px;
            border: 1px solid rgba(255, 184, 107, 0.2);
            backdrop-filter: blur(5px);
        }

        .question-hint {
            font-style: italic;
            color: var(--warning);
            margin-bottom: 25px;
            padding: 20px 25px;
            background: rgba(255, 184, 107, 0.03);
            border-radius: 20px;
            border-left: 6px solid var(--warning);
            font-size: 1.1rem;
            display: none;
            backdrop-filter: blur(5px);
        }

        /* –ü–æ–ª–µ –≤–≤–æ–¥–∞ ‚Äî —Ñ—É—Ç—É—Ä–∏—Å—Ç–∏—á–Ω–æ–µ */
        .answer-input {
            width: 100%;
            padding: 22px 25px;
            border: 2px solid rgba(255,255,255,0.05);
            border-radius: 50px;
            font-size: 1.4rem;
            margin-bottom: 25px;
            transition: var(--transition);
            background: rgba(0,0,0,0.2);
            color: var(--text-primary);
            font-family: 'Inter', sans-serif;
            backdrop-filter: blur(5px);
        }

        .answer-input:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 5px var(--primary-glow);
            background: rgba(0,0,0,0.1);
        }

        /* –§–∏–¥—ã–µ–∫ ‚Äî —Å–æ—á–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è */
        .answer-feedback {
            padding: 25px;
            border-radius: 50px;
            margin: 25px 0;
            display: none;
            font-size: 1.3rem;
            font-weight: 600;
            text-align: center;
            animation: feedbackPop 0.4s cubic-bezier(0.2, 0.9, 0.3, 1.2);
            backdrop-filter: blur(10px);
        }

        @keyframes feedbackPop {
            0% { opacity: 0; transform: scale(0.9); }
            100% { opacity: 1; transform: scale(1); }
        }

        .answer-feedback.correct {
            background: rgba(160, 228, 0, 0.08);
            border: 1px solid var(--success);
            color: var(--success);
            text-shadow: 0 0 15px var(--accent-glow);
        }

        .answer-feedback.incorrect {
            background: rgba(255, 85, 85, 0.08);
            border: 1px solid var(--danger);
            color: var(--danger);
            text-shadow: 0 0 15px rgba(255,85,85,0.4);
        }

        /* –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ ‚Äî —Ü–∏—Ñ—Ä–æ–≤—ã–µ —Ç–∞–±–ª–æ */
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }

        .stat-box {
            background: rgba(0,0,0,0.2);
            backdrop-filter: blur(10px);
            border-radius: 24px;
            padding: 25px 20px;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.02);
            transition: var(--transition);
        }

        .stat-box:hover {
            border-color: var(--primary);
            transform: translateY(-3px);
        }

        .stat-box h4 {
            font-size: 0.9rem;
            color: var(--text-tertiary);
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-weight: 500;
        }

        .stat-box p {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 2.6rem;
            font-weight: 700;
            color: var(--text-primary);
            line-height: 1;
        }

        /* –°–µ—Ç–∫–∞ –∫–≤–∏–∑–∞ ‚Äî –∫–∞–∫ —á–∏–ø—ã */
        .quiz-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 20px;
            margin-top: 40px;
        }

        .quiz-cell {
            background: rgba(0,0,0,0.2);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px 15px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            border: 1px solid rgba(255,255,255,0.02);
            position: relative;
        }

        .quiz-cell:hover {
            border-color: var(--primary);
            transform: translateY(-6px);
            box-shadow: 0 15px 25px -10px var(--primary-glow);
        }

        .quiz-cell.selected {
            background: linear-gradient(135deg, rgba(0,240,255,0.1), rgba(255,62,181,0.1));
            border: 1.5px solid var(--secondary);
            box-shadow: 0 0 30px var(--secondary-glow);
        }

        .quiz-cell h4 {
            font-size: 1.1rem;
            margin-bottom: 12px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .quiz-cell p {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 2.2rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .quiz-cell small {
            color: var(--text-tertiary);
            font-size: 0.85rem;
        }

        /* –û–ø—Ü–∏–∏ –≤—Ä–µ–º–µ–Ω–∏ ‚Äî –º–∏–Ω–∏–º–∞–ª */
        .time-options {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 20px;
            margin-top: 40px;
        }

        .time-option {
            background: rgba(0,0,0,0.2);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px 15px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            border: 1px solid rgba(255,255,255,0.02);
        }

        .time-option:hover {
            border-color: var(--accent);
            transform: translateY(-5px);
            box-shadow: 0 10px 25px -10px var(--accent-glow);
        }

        .time-option.selected {
            background: linear-gradient(135deg, rgba(160,228,0,0.1), rgba(0,240,255,0.1));
            border: 1.5px solid var(--accent);
        }

        .time-option h4 {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .time-option p {
            font-size: 0.9rem;
            color: var(--text-tertiary);
        }

        /* –ö–∞—Ä—Ç–æ—á–∫–∏ —É—á–µ–Ω—ã—Ö ‚Äî —Å –Ω–µ–æ–Ω–æ–≤—ã–º–∏ –ø–æ—Ä—Ç—Ä–µ—Ç–∞–º–∏ */
        .scientist-card {
            background: rgba(0,0,0,0.15);
            backdrop-filter: blur(15px);
            border-radius: 32px;
            padding: 30px;
            margin: 20px 0;
            border: 1px solid rgba(255,255,255,0.02);
            display: flex;
            gap: 30px;
            align-items: center;
            transition: var(--transition);
        }

        .scientist-card:hover {
            border-color: var(--secondary);
            box-shadow: 0 20px 30px -15px var(--secondary-glow);
        }

        .scientist-photo {
            width: 130px;
            height: 130px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid transparent;
            background: linear-gradient(135deg, var(--primary), var(--secondary)) border-box;
            -webkit-mask: linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0);
            mask: linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            padding: 3px;
        }

        .scientist-name {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.8rem;
            color: var(--text-primary);
            margin-bottom: 5px;
            font-weight: 600;
        }

        .scientist-dates {
            font-size: 1rem;
            color: var(--text-tertiary);
            margin-bottom: 15px;
            font-style: italic;
        }

        .scientist-discovery {
            font-size: 1.1rem;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .scientist-discovery strong {
            color: var(--primary);
        }

        /* –§—É—Ç–µ—Ä */
        footer {
            text-align: center;
            padding: 50px 30px;
            background: var(--card-bg);
            backdrop-filter: var(--blur);
            border-radius: var(--border-radius);
            margin-top: 60px;
            border: var(--glass-border);
            position: relative;
        }

        .logo {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 2.8rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 15px;
        }

        .developers {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin: 20px 0 10px;
        }

        .copyright {
            font-size: 0.9rem;
            color: var(--text-tertiary);
        }

        /* –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä */
        .progress-bar {
            height: 8px;
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
            overflow: hidden;
            margin: 15px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            border-radius: 10px;
            transition: width 1.2s cubic-bezier(0.2, 0.9, 0.3, 1);
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 1024px) {
            h1 { font-size: 4rem; }
            .container { padding: 15px; }
        }

        @media (max-width: 768px) {
            h1 { font-size: 3rem; }
            .subtitle { font-size: 1.1rem; }
            .question-text { font-size: 1.6rem; }
            .timer { font-size: 3rem; }
            .scientist-card { flex-direction: column; text-align: center; }
        }

        @media (max-width: 576px) {
            h1 { font-size: 2.4rem; }
            .screen { padding: 30px 20px; }
            .timer { font-size: 2.4rem; }
            .stat-box p { font-size: 2rem; }
        }
    </style>
</head>
<body>
    <!-- –§–æ–Ω–æ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã: —Å–µ—Ç–∫–∞ –∏ –Ω–µ–æ–Ω–æ–≤—ã–µ –æ—Ä–±—ã -->
    <div class="bg-grid"></div>
    <div class="floating-orb orb1"></div>
    <div class="floating-orb orb2"></div>
    <div class="floating-orb orb3"></div>

    <!-- –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ç–µ–º—ã -->
    <button class="theme-toggle" id="themeToggle">
        <i class="fas fa-sun"></i>
    </button>

    <div class="container">
        <header>
            <h1>–û–ª–∏–º–ø–∏–∫</h1>
            <p class="subtitle">–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞</p>
            <p class="tagline">—Ñ–∏–∑–∏–∫–∞ ‚Ä¢ –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞ ‚Ä¢ —Å–∏–Ω–≥—É–ª—è—Ä–Ω–æ—Å—Ç—å</p>
        </header>

        <!-- –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω -->
        <div class="screen active" id="mainScreen">
            <h2 style="text-align: center;">–í—ã–±–µ—Ä–∏—Ç–µ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—É</h2>
            <div class="selection-grid">
                <div class="selection-card" data-subject="physics">
                    <i class="fas fa-atom"></i>
                    <h3>–§–∏–∑–∏–∫–∞</h3>
                    <p>–û—Ç –∑–∞–∫–æ–Ω–æ–≤ –ù—å—é—Ç–æ–Ω–∞ –¥–æ –∫–≤–∞–Ω—Ç–æ–≤–æ–π –∑–∞–ø—É—Ç–∞–Ω–Ω–æ—Å—Ç–∏. –ë—Ä–æ—Å—å –≤—ã–∑–æ–≤ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏.</p>
                </div>
                <div class="selection-card" data-subject="math">
                    <i class="fas fa-infinity"></i>
                    <h3>–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞</h3>
                    <p>–ß–∏—Å–ª–∞, —Ñ–æ—Ä–º—É–ª—ã, —Ç–µ–æ—Ä–µ–º—ã. –Ø–∑—ã–∫, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –Ω–∞–ø–∏—Å–∞–Ω–∞ –≤—Å–µ–ª–µ–Ω–Ω–∞—è.</p>
                </div>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –≤—ã–±–æ—Ä–∞ —Ä–µ–∂–∏–º–∞ -->
        <div class="screen" id="modeScreen">
            <h2 style="text-align: center;">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º</h2>
            <div class="selection-grid">
                <div class="selection-card" data-mode="quiz">
                    <i class="fas fa-brain"></i>
                    <h3>–ö–≤–∏–∑</h3>
                    <p>6 —Ä–∞–∑–¥–µ–ª–æ–≤, —Ä–∞–∑–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å. –ë—ã—Å—Ç—Ä–æ, —É–º–Ω–æ, –¥–µ—Ä–∑–∫–æ.</p>
                </div>
                <div class="selection-card" data-mode="marathon">
                    <i class="fas fa-trophy"></i>
                    <h3>–ú–∞—Ä–∞—Ñ–æ–Ω</h3>
                    <p>150 –≤–æ–ø—Ä–æ—Å–æ–≤ –Ω–∞ –≤—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç—å. –¢–æ–ª—å–∫–æ –¥–ª—è —Å–∏–ª—å–Ω–µ–π—à–∏—Ö.</p>
                </div>
            </div>
            <div style="text-align: center; margin-top: 40px;">
                <button class="btn btn-secondary" id="backToMain">‚Üê –ù–∞–∑–∞–¥</button>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –≤—ã–±–æ—Ä–∞ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –º–∞—Ä–∞—Ñ–æ–Ω–∞ -->
        <div class="screen" id="timeScreen">
            <h2 style="text-align: center;">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∞–π–º–∏–Ω–≥</h2>
            <p style="text-align: center; color: var(--text-secondary); margin-bottom: 30px; font-size: 1.2rem;">
                –ú–∞—Ä–∞—Ñ–æ–Ω –ø–æ <span id="marathonSubject" style="font-weight: 600; color: var(--primary);"></span>. 150 –≤–æ–ø—Ä–æ—Å–æ–≤ –Ω–∞ –≤—Ä–µ–º—è.
            </p>
            <div class="time-options">
                <div class="time-option" data-minutes="30">
                    <h4>30</h4>
                    <p>—ç–∫—Å—Ç—Ä–∏–º</p>
                </div>
                <div class="time-option" data-minutes="45">
                    <h4>45</h4>
                    <p>—Ö–∞—Ä–¥</p>
                </div>
                <div class="time-option" data-minutes="60">
                    <h4>60</h4>
                    <p>—Å—Ç–∞–Ω–¥–∞—Ä—Ç</p>
                </div>
                <div class="time-option" data-minutes="120">
                    <h4>120</h4>
                    <p>–∫–æ–º—Ñ–æ—Ä—Ç</p>
                </div>
                <div class="time-option" data-minutes="150">
                    <h4>150</h4>
                    <p>–ª–∞–π—Ç</p>
                </div>
                <div class="time-option" data-minutes="180">
                    <h4>180</h4>
                    <p>–º–µ–¥–∏—Ç–∞—Ü–∏—è</p>
                </div>
            </div>
            <div style="text-align: center; margin-top: 40px;">
                <button class="btn btn-secondary" id="backToMode">‚Üê –ù–∞–∑–∞–¥</button>
                <button class="btn btn-accent" id="startMarathon">üèÅ –°—Ç–∞—Ä—Ç</button>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –∫–≤–∏–∑–∞ (–≤—ã–±–æ—Ä —Ä–∞–∑–¥–µ–ª–∞) -->
        <div class="screen" id="quizScreen">
            <h2 style="text-align: center;">
                –ö–≤–∏–∑: <span id="quizSubjectName" style="color: var(--secondary);"></span>
            </h2>
            <p style="text-align: center; color: var(--text-secondary); margin-bottom: 30px; font-size: 1.2rem;">
                –í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–∑–¥–µ–ª –∏ —Å–ª–æ–∂–Ω–æ—Å—Ç—å (10‚Äì50 –±–∞–ª–ª–æ–≤)
            </p>
            <div class="quiz-grid" id="quizGridContainer"></div>
            <div style="text-align: center; margin-top: 40px;">
                <button class="btn btn-secondary" id="backToModeFromQuiz">‚Üê –ù–∞–∑–∞–¥</button>
                <button class="btn btn-accent" id="startSelectedQuiz" disabled>‚ñ∂ –ù–∞—á–∞—Ç—å</button>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –≤–æ–ø—Ä–æ—Å–∞ (–º–∞—Ä–∞—Ñ–æ–Ω) -->
        <div class="screen" id="questionScreen">
            <div class="timer" id="timer">--:--</div>
            <div class="stats">
                <div class="stat-box"><h4>–í–æ–ø—Ä–æ—Å</h4><p id="currentQuestion">1/150</p></div>
                <div class="stat-box"><h4>–ë–∞–ª–ª—ã</h4><p id="currentScore">0</p></div>
                <div class="stat-box"><h4>‚úÖ</h4><p id="correctAnswers">0</p></div>
                <div class="stat-box"><h4>‚ùå</h4><p id="wrongAnswers">0</p></div>
            </div>
            <div class="question-container">
                <div class="answer-type" id="answerType">–û—Ç–≤–µ—Ç: —á–∏—Å–ª–æ</div>
                <div class="question-text" id="questionText">...</div>
                <div class="question-hint" id="questionHint">–ü–æ–¥—Å–∫–∞–∑–∫–∞</div>
                <input type="text" class="answer-input" id="answerInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –æ—Ç–≤–µ—Ç">
                <div class="answer-feedback" id="answerFeedback"></div>
            </div>
            <div class="controls" style="display: flex; gap: 20px; justify-content: center;">
                <button class="btn btn-secondary" id="hintButton"><i class="fas fa-lightbulb"></i> –ü–æ–¥—Å–∫–∞–∑–∫–∞</button>
                <button class="btn" id="submitAnswer"><i class="fas fa-check"></i> –ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –≤–æ–ø—Ä–æ—Å–∞ (–∫–≤–∏–∑) -->
        <div class="screen" id="quizQuestionScreen">
            <div class="timer" id="quizTimer">00:00</div>
            <div class="stats">
                <div class="stat-box"><h4>–í–æ–ø—Ä–æ—Å</h4><p id="quizCurrentQuestion">1/10</p></div>
                <div class="stat-box"><h4>–ë–∞–ª–ª—ã</h4><p id="quizCurrentScore">0</p></div>
                <div class="stat-box"><h4>‚úÖ</h4><p id="quizCorrectAnswers">0</p></div>
                <div class="stat-box"><h4>‚ùå</h4><p id="quizWrongAnswers">0</p></div>
            </div>
            <div class="question-container">
                <div class="answer-type" id="quizAnswerType">–û—Ç–≤–µ—Ç: —á–∏—Å–ª–æ</div>
                <div class="question-text" id="quizQuestionText">...</div>
                <div class="question-hint" id="quizQuestionHint">–ü–æ–¥—Å–∫–∞–∑–∫–∞</div>
                <input type="text" class="answer-input" id="quizAnswerInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –æ—Ç–≤–µ—Ç">
                <div class="answer-feedback" id="quizAnswerFeedback"></div>
            </div>
            <div class="controls" style="display: flex; gap: 20px; justify-content: center;">
                <button class="btn btn-secondary" id="quizHintButton"><i class="fas fa-lightbulb"></i> –ü–æ–¥—Å–∫–∞–∑–∫–∞</button>
                <button class="btn" id="quizSubmitAnswer"><i class="fas fa-check"></i> –ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ -->
        <div class="screen" id="resultScreen">
            <h2 style="text-align: center;">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã</h2>
            <div class="question-container">
                <h3 style="text-align: center; margin-bottom: 30px; color: var(--text-primary);" id="resultTitle"></h3>
                <div class="stats">
                    <div class="stat-box"><h4>–ë–∞–ª–ª—ã</h4><p id="finalScore">0</p></div>
                    <div class="stat-box"><h4>–¢–æ—á–Ω–æ—Å—Ç—å</h4><p id="finalCorrect">0%</p></div>
                    <div class="stat-box"><h4>–í—Ä–µ–º—è</h4><p id="timeSpent">0:00</p></div>
                    <div class="stat-box"><h4>–†–µ–∫–æ—Ä–¥</h4><p id="recordScore">0</p></div>
                </div>
                
                <div id="scientistsContainer" style="margin: 40px 0;">
                    <h3 style="text-align: center; color: var(--text-primary); margin-bottom: 30px;">–õ–µ–≥–µ–Ω–¥—ã –Ω–∞—É–∫–∏</h3>
                    <div id="scientistsList"></div>
                </div>
                
                <div style="text-align: center; margin: 40px 0;">
                    <h3 style="color: var(--text-primary); margin-bottom: 20px;">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
                    <div style="max-width: 600px; margin: 0 auto;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                            <span>–ü—Ä–∞–≤–∏–ª—å–Ω–æ</span>
                            <span id="correctCount">0</span>
                        </div>
                        <div class="progress-bar"><div class="progress-fill" id="correctProgress" style="width: 0%"></div></div>
                        <div style="display: flex; justify-content: space-between; margin: 20px 0 10px 0;">
                            <span>–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ</span>
                            <span id="wrongCount">0</span>
                        </div>
                        <div class="progress-bar"><div class="progress-fill" id="wrongProgress" style="width: 0%; background: var(--danger);"></div></div>
                    </div>
                </div>
                
                <div style="text-align: center; margin-top: 40px;">
                    <button class="btn" id="restartButton"><i class="fas fa-redo"></i> –ï—â—ë —Ä–∞–∑</button>
                    <button class="btn btn-secondary" id="backToMainFromResults"><i class="fas fa-home"></i> –ù–∞ –≥–ª–∞–≤–Ω—É—é</button>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <div class="logo">–û–ª–∏–º–ø–∏–∫</div>
        <p>–ò—Å–ø—ã—Ç–∞–π—Ç–µ –ø—Ä–µ–¥–µ–ª—ã —Å–≤–æ–µ–≥–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞</p>
        <p class="developers">–°—Ç—É–¥–µ–Ω—Ç—ã –¢–¢–ò–¢: –°–∞—Ä–≤–∏–ª–∏–Ω –ú–∏—Ö–∞–∏–ª & –ú–æ—Ä–æ–∑–∫–∏–Ω–∞ –ï–∫–∞—Ç–µ—Ä–∏–Ω–∞</p>
        <p class="copyright">¬© 2026 ‚Äî –∫–≤–∏–∑ –Ω–æ–≤–æ–≥–æ –ø–æ–∫–æ–ª–µ–Ω–∏—è</p>
    </footer>

    <script>
        // –ü–û–õ–ù–û–°–¢–¨–Æ –°–û–•–†–ê–ù–Å–ù–ù–ê–Ø –õ–û–ì–ò–ö–ê –ò–ó –û–†–ò–ì–ò–ù–ê–õ–ê
        // (–≤–µ—Å—å –≤–∞—à JavaScript –∫–æ–¥ –æ—Å—Ç–∞—ë—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
        
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let currentSubject = '';
        let currentMode = '';
        let currentTimeLimit = 0;
        let currentQuizSection = 0;
        let currentQuizPoints = 0;
        
        // –î–∞–Ω–Ω—ã–µ –∏–≥—Ä—ã
        let questions = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let correctAnswers = 0;
        let wrongAnswers = 0;
        let timeLeft = 0;
        let timerInterval = null;
        let startTime = 0;
        let hintsUsed = 0;
        
        // –î–ª—è –∫–≤–∏–∑–∞
        let quizQuestions = [];
        let currentQuizQuestionIndex = 0;
        let quizScore = 0;
        let quizCorrectAnswers = 0;
        let quizWrongAnswers = 0;
        
        // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
        const screens = {
            main: document.getElementById('mainScreen'),
            mode: document.getElementById('modeScreen'),
            time: document.getElementById('timeScreen'),
            quiz: document.getElementById('quizScreen'),
            question: document.getElementById('questionScreen'),
            quizQuestion: document.getElementById('quizQuestionScreen'),
            result: document.getElementById('resultScreen')
        };
        
        const themeToggle = document.getElementById('themeToggle');
        const marathonSubject = document.getElementById('marathonSubject');
        const quizSubjectName = document.getElementById('quizSubjectName');
        const quizGridContainer = document.getElementById('quizGridContainer');
        const timerDisplay = document.getElementById('timer');
        const quizTimerDisplay = document.getElementById('quizTimer');
        const currentQuestionDisplay = document.getElementById('currentQuestion');
        const currentScoreDisplay = document.getElementById('currentScore');
        const correctAnswersDisplay = document.getElementById('correctAnswers');
        const wrongAnswersDisplay = document.getElementById('wrongAnswers');
        const questionText = document.getElementById('questionText');
        const quizQuestionText = document.getElementById('quizQuestionText');
        const answerType = document.getElementById('answerType');
        const quizAnswerType = document.getElementById('quizAnswerType');
        const questionHint = document.getElementById('questionHint');
        const quizQuestionHint = document.getElementById('quizQuestionHint');
        const answerInput = document.getElementById('answerInput');
        const quizAnswerInput = document.getElementById('quizAnswerInput');
        const answerFeedback = document.getElementById('answerFeedback');
        const quizAnswerFeedback = document.getElementById('quizAnswerFeedback');
        const hintButton = document.getElementById('hintButton');
        const quizHintButton = document.getElementById('quizHintButton');
        const submitAnswer = document.getElementById('submitAnswer');
        const quizSubmitAnswer = document.getElementById('quizSubmitAnswer');
        const finalScore = document.getElementById('finalScore');
        const finalCorrect = document.getElementById('finalCorrect');
        const timeSpent = document.getElementById('timeSpent');
        const recordScore = document.getElementById('recordScore');
        const resultTitle = document.getElementById('resultTitle');
        const correctCount = document.getElementById('correctCount');
        const wrongCount = document.getElementById('wrongCount');
        const correctProgress = document.getElementById('correctProgress');
        const wrongProgress = document.getElementById('wrongProgress');
        const scientistsContainer = document.getElementById('scientistsContainer');
        const scientistsList = document.getElementById('scientistsList');
        
        // –ë–∞–∑–∞ –≤–æ–ø—Ä–æ—Å–æ–≤
        const physicsQuestions = [];
        const mathQuestions = [];
        
        // –ë–∞–∑–∞ —É—á–µ–Ω—ã—Ö
        const physicsScientists = [
            { name: "–ò—Å–∞–∞–∫ –ù—å—é—Ç–æ–Ω", dates: "1643-1727", photo: "https://upload.wikimedia.org/wikipedia/commons/thumb/3/39/GodfreyKneller-IsaacNewton-1689.jpg/220px-GodfreyKneller-IsaacNewton-1689.jpg", discovery: "–°—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞–ª –∑–∞–∫–æ–Ω—ã –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–π –º–µ—Ö–∞–Ω–∏–∫–∏, –∑–∞–∫–æ–Ω –≤—Å–µ–º–∏—Ä–Ω–æ–≥–æ —Ç—è–≥–æ—Ç–µ–Ω–∏—è, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–ª –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–µ –∏ –∏–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω–æ–µ –∏—Å—á–∏—Å–ª–µ–Ω–∏—è." },
            { name: "–ê–ª—å–±–µ—Ä—Ç –≠–π–Ω—à—Ç–µ–π–Ω", dates: "1879-1955", photo: "https://upload.wikimedia.org/wikipedia/commons/thumb/3/3e/Einstein_1921_by_F_Schmutzer_-_restoration.jpg/220px-Einstein_1921_by_F_Schmutzer_-_restoration.jpg", discovery: "–°–æ–∑–¥–∞–ª —Å–ø–µ—Ü–∏–∞–ª—å–Ω—É—é –∏ –æ–±—â—É—é —Ç–µ–æ—Ä–∏—é –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –æ–±—ä—è—Å–Ω–∏–ª —Ñ–æ—Ç–æ—ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏–π —ç—Ñ—Ñ–µ–∫—Ç, –≤–Ω–µ—Å –≤–∫–ª–∞–¥ –≤ —Ä–∞–∑–≤–∏—Ç–∏–µ –∫–≤–∞–Ω—Ç–æ–≤–æ–π —Ç–µ–æ—Ä–∏–∏." },
            { name: "–ú–∞—Ä–∏—è –ö—é—Ä–∏", dates: "1867-1934", photo: "https://upload.wikimedia.org/wikipedia/commons/thumb/c/c8/Marie_Curie_c._1920s.jpg/220px-Marie_Curie_c._1920s.jpg", discovery: "–û—Ç–∫—Ä—ã–ª–∞ —ç–ª–µ–º–µ–Ω—Ç—ã —Ä–∞–¥–∏–π –∏ –ø–æ–ª–æ–Ω–∏–π, –∏—Å—Å–ª–µ–¥–æ–≤–∞–ª–∞ —Ä–∞–¥–∏–æ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å, –ø–µ—Ä–≤–∞—è –∂–µ–Ω—â–∏–Ω–∞-–ª–∞—É—Ä–µ–∞—Ç –ù–æ–±–µ–ª–µ–≤—Å–∫–æ–π –ø—Ä–µ–º–∏–∏." },
            { name: "–ù–∏–∫–æ–ª–∞ –¢–µ—Å–ª–∞", dates: "1856-1943", photo: "https://upload.wikimedia.org/wikipedia/commons/thumb/d/d4/N.Tesla.JPG/220px-N.Tesla.JPG", discovery: "–í–Ω–µ—Å –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–π –≤–∫–ª–∞–¥ –≤ —Ä–∞–∑–≤–∏—Ç–∏–µ —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–∞ –∏ –º–∞–≥–Ω–µ—Ç–∏–∑–º–∞, –∏–∑–æ–±—Ä–µ–ª –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–π —Ç–æ–∫, —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ç–æ—Ä –¢–µ—Å–ª–∞." },
            { name: "–ú–∞–π–∫–ª –§–∞—Ä–∞–¥–µ–π", dates: "1791-1867", photo: "https://upload.wikimedia.org/wikipedia/commons/thumb/d/d5/Michael_Faraday_%281827%29.jpg/220px-Michael_Faraday_%281827%29.jpg", discovery: "–û—Ç–∫—Ä—ã–ª —ç–ª–µ–∫—Ç—Ä–æ–º–∞–≥–Ω–∏—Ç–Ω—É—é –∏–Ω–¥—É–∫—Ü–∏—é, –∑–∞–∫–æ–Ω—ã —ç–ª–µ–∫—Ç—Ä–æ–ª–∏–∑–∞, —Å–æ–∑–¥–∞–ª –ø–µ—Ä–≤—É—é –º–æ–¥–µ–ª—å —ç–ª–µ–∫—Ç—Ä–æ–¥–≤–∏–≥–∞—Ç–µ–ª—è." }
        ];
        
        const mathScientists = [
            { name: "–ü–∏—Ñ–∞–≥–æ—Ä", dates: "570-495 –¥–æ –Ω.—ç.", photo: "https://upload.wikimedia.org/wikipedia/commons/thumb/1/1c/Pythagoras.jpg/220px-Pythagoras.jpg", discovery: "–°—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞–ª —Ç–µ–æ—Ä–µ–º—É –ü–∏—Ñ–∞–≥–æ—Ä–∞, –æ—Å–Ω–æ–≤–∞–ª –ø–∏—Ñ–∞–≥–æ—Ä–µ–π—Å–∫—É—é —à–∫–æ–ª—É, –∏–∑—É—á–∞–ª —Ç–µ–æ—Ä–∏—é —á–∏—Å–µ–ª –∏ –º—É–∑—ã–∫–∏." },
            { name: "–ê—Ä—Ö–∏–º–µ–¥", dates: "287-212 –¥–æ –Ω.—ç.", photo: "https://upload.wikimedia.org/wikipedia/commons/thumb/e/e7/Domenico-Fetti_Archimedes_1620.jpg/220px-Domenico-Fetti_Archimedes_1620.jpg", discovery: "–û—Ç–∫—Ä—ã–ª –∑–∞–∫–æ–Ω –ê—Ä—Ö–∏–º–µ–¥–∞, –∑–∞–ª–æ–∂–∏–ª –æ—Å–Ω–æ–≤—ã –∏–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω–æ–≥–æ –∏—Å—á–∏—Å–ª–µ–Ω–∏—è, –≤—ã—á–∏—Å–ª–∏–ª –ø–ª–æ—â–∞–¥—å —Å—Ñ–µ—Ä—ã –∏ –æ–±—ä–µ–º —à–∞—Ä–∞." },
            { name: "–ò—Å–∞–∞–∫ –ù—å—é—Ç–æ–Ω", dates: "1643-1727", photo: "https://upload.wikimedia.org/wikipedia/commons/thumb/3/39/GodfreyKneller-IsaacNewton-1689.jpg/220px-GodfreyKneller-IsaacNewton-1689.jpg", discovery: "–°–æ–∑–¥–∞–ª –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–µ –∏ –∏–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω–æ–µ –∏—Å—á–∏—Å–ª–µ–Ω–∏—è (—Å–æ–≤–º–µ—Å—Ç–Ω–æ —Å –õ–µ–π–±–Ω–∏—Ü–µ–º), —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–ª –±–∏–Ω–æ–º –ù—å—é—Ç–æ–Ω–∞." },
            { name: "–ö–∞—Ä–ª –§—Ä–∏–¥—Ä–∏—Ö –ì–∞—É—Å—Å", dates: "1777-1855", photo: "https://upload.wikimedia.org/wikipedia/commons/thumb/9/9b/Carl_Friedrich_Gauss.jpg/220px-Carl_Friedrich_Gauss.jpg", discovery: "–ö–æ—Ä–æ–ª—å –º–∞—Ç–µ–º–∞—Ç–∏–∫–æ–≤, –¥–æ–∫–∞–∑–∞–ª –æ—Å–Ω–æ–≤–Ω—É—é —Ç–µ–æ—Ä–µ–º—É –∞–ª–≥–µ–±—Ä—ã, —Å–æ–∑–¥–∞–ª —Ç–µ–æ—Ä–∏—é —á–∏—Å–µ–ª, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–ª –º–µ—Ç–æ–¥ –Ω–∞–∏–º–µ–Ω—å—à–∏—Ö –∫–≤–∞–¥—Ä–∞—Ç–æ–≤." },
            { name: "–õ–µ–æ–Ω–∞—Ä–¥ –≠–π–ª–µ—Ä", dates: "1707-1783", photo: "https://upload.wikimedia.org/wikipedia/commons/thumb/d/d7/Leonhard_Euler.jpg/220px-Leonhard_Euler.jpg", discovery: "–°–∞–º—ã–π –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ã–π –º–∞—Ç–µ–º–∞—Ç–∏–∫ –≤ –∏—Å—Ç–æ—Ä–∏–∏, –≤–≤–µ–ª –ø–æ–Ω—è—Ç–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏, —Å–∏–º–≤–æ–ª—ã e, i, œÄ, f(x), —Å–æ–∑–¥–∞–ª —Ç–µ–æ—Ä–∏—é –≥—Ä–∞—Ñ–æ–≤." }
        ];
        
        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–æ–ø—Ä–æ—Å–æ–≤ (–æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞)
        function generateQuestions() {
            physicsQuestions.length = 0;
            mathQuestions.length = 0;
            
            for (let i = 0; i < 150; i++) {
                const section = i % 6;
                const difficulty = Math.floor(Math.random() * 5) + 1;
                const points = difficulty * 10;
                let question, answer, hint, answerTypeText;
                
                if (i < 25) {
                    const a = Math.floor(Math.random() * 20) + 1;
                    const v = Math.floor(Math.random() * 50) + 10;
                    const t = Math.floor(Math.random() * 10) + 1;
                    question = `–¢–µ–ª–æ –¥–≤–∏–∂–µ—Ç—Å—è —Å —É—Å–∫–æ—Ä–µ–Ω–∏–µ–º ${a} –º/—Å¬≤. –ù–∞—á–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å —Ä–∞–≤–Ω–∞ ${v} –º/—Å. –ö–∞–∫–æ–π –ø—É—Ç—å –ø—Ä–æ–π–¥–µ—Ç —Ç–µ–ª–æ –∑–∞ –≤—Ä–µ–º—è ${t} —Å?`;
                    answer = (v * t + (a * t * t) / 2).toFixed(2);
                    hint = `S = v‚ÇÄt + (at¬≤)/2`;
                    answerTypeText = "–û—Ç–≤–µ—Ç: –¥–µ—Å—è—Ç–∏—á–Ω–æ–µ —á–∏—Å–ª–æ (–º)";
                } else if (i < 50) {
                    const m = Math.floor(Math.random() * 10) + 1;
                    const c = Math.floor(Math.random() * 500) + 1000;
                    const deltaT = Math.floor(Math.random() * 50) + 10;
                    question = `–ö–∞–∫–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–µ–ø–ª–æ—Ç—ã –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å —Ç–µ–ª—É –º–∞—Å—Å–æ–π ${m} –∫–≥ —Å —É–¥–µ–ª—å–Ω–æ–π —Ç–µ–ø–ª–æ–µ–º–∫–æ—Å—Ç—å—é ${c} –î–∂/(–∫–≥¬∑¬∞C), —á—Ç–æ–±—ã –Ω–∞–≥—Ä–µ—Ç—å –µ–≥–æ –Ω–∞ ${deltaT} ¬∞C?`;
                    answer = (m * c * deltaT).toFixed(2);
                    hint = `Q = cmŒîT`;
                    answerTypeText = "–û—Ç–≤–µ—Ç: –¥–µ—Å—è—Ç–∏—á–Ω–æ–µ —á–∏—Å–ª–æ (–î–∂)";
                } else if (i < 75) {
                    const u = Math.floor(Math.random() * 100) + 10;
                    const r = Math.floor(Math.random() * 50) + 5;
                    question = `–ß–µ–º—É —Ä–∞–≤–Ω–∞ —Å–∏–ª–∞ —Ç–æ–∫–∞ –≤ —Ü–µ–ø–∏, –µ—Å–ª–∏ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ —Ä–∞–≤–Ω–æ ${u} –í, –∞ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ ${r} –û–º?`;
                    answer = (u / r).toFixed(2);
                    hint = `I = U/R`;
                    answerTypeText = "–û—Ç–≤–µ—Ç: –¥–µ—Å—è—Ç–∏—á–Ω–æ–µ —á–∏—Å–ª–æ (–ê)";
                } else if (i < 100) {
                    const f = Math.floor(Math.random() * 30) + 10;
                    const d = Math.floor(Math.random() * 60) + 20;
                    question = `–õ–∏–Ω–µ–π–Ω–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –ª–∏–Ω–∑—ã —Ä–∞–≤–Ω–æ 2. –§–æ–∫—É—Å–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –ª–∏–Ω–∑—ã ${f} —Å–º. –ù–∞ –∫–∞–∫–æ–º —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–∏ –æ—Ç –ª–∏–Ω–∑—ã –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ø—Ä–µ–¥–º–µ—Ç, –µ—Å–ª–∏ –µ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–∏ ${d} —Å–º –æ—Ç –ª–∏–Ω–∑—ã?`;
                    answer = (d / 2).toFixed(2);
                    hint = `1/F = 1/d + 1/f, –ì = f/d`;
                    answerTypeText = "–û—Ç–≤–µ—Ç: –¥–µ—Å—è—Ç–∏—á–Ω–æ–µ —á–∏—Å–ª–æ (—Å–º)";
                } else if (i < 125) {
                    const lambda = (Math.random() * 300 + 100).toFixed(0);
                    const h = 6.63e-34, c = 3e8;
                    const lambdaM = lambda * 1e-9;
                    question = `–ß–µ–º—É —Ä–∞–≤–Ω–∞ —ç–Ω–µ—Ä–≥–∏—è —Ñ–æ—Ç–æ–Ω–∞ —Å –¥–ª–∏–Ω–æ–π –≤–æ–ª–Ω—ã ${lambda} –Ω–º? (h = 6.63¬∑10‚Åª¬≥‚Å¥ –î–∂¬∑—Å, c = 3¬∑10‚Å∏ –º/—Å)`;
                    answer = ((h * c) / lambdaM).toExponential(2);
                    hint = `E = hc/Œª`;
                    answerTypeText = "–û—Ç–≤–µ—Ç: —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è —Ñ–æ—Ä–º–∞ (–î–∂)";
                } else {
                    const m = (Math.random() * 0.5 + 0.1).toFixed(1);
                    const c = 3e8;
                    question = `–ß–µ–º—É —Ä–∞–≤–Ω–∞ —ç–Ω–µ—Ä–≥–∏—è –ø–æ–∫–æ—è —Ç–µ–ª–∞ –º–∞—Å—Å–æ–π ${m} –∫–≥? (c = 3¬∑10‚Å∏ –º/—Å)`;
                    answer = (m * c * c).toExponential(2);
                    hint = `E = mc¬≤`;
                    answerTypeText = "–û—Ç–≤–µ—Ç: —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è —Ñ–æ—Ä–º–∞ (–î–∂)";
                }
                physicsQuestions.push({ id: i, text: question, answer: answer, hint: hint, section: section, points: points, difficulty: difficulty, answerType: answerTypeText, used: false });
            }
            
            for (let i = 0; i < 150; i++) {
                const section = i % 6;
                const difficulty = Math.floor(Math.random() * 5) + 1;
                const points = difficulty * 10;
                let question, answer, hint, answerTypeText;
                
                if (i < 25) {
                    const a = Math.floor(Math.random() * 20) + 1;
                    const b = Math.floor(Math.random() * 20) + 1;
                    const c = Math.floor(Math.random() * 10) + 1;
                    question = `–†–µ—à–∏—Ç–µ —É—Ä–∞–≤–Ω–µ–Ω–∏–µ: ${a}x¬≤ + ${b}x + ${c} = 0. –í–≤–µ–¥–∏—Ç–µ –Ω–∞–∏–±–æ–ª—å—à–∏–π –∫–æ—Ä–µ–Ω—å.`;
                    const discriminant = b * b - 4 * a * c;
                    answer = discriminant >= 0 ? ((-b + Math.sqrt(discriminant)) / (2 * a)).toFixed(2) : "0.00";
                    hint = `x = (-b ¬± ‚àöD)/(2a), D = b¬≤ - 4ac`;
                    answerTypeText = "–û—Ç–≤–µ—Ç: –¥–µ—Å—è—Ç–∏—á–Ω–æ–µ —á–∏—Å–ª–æ";
                } else if (i < 50) {
                    const r = Math.floor(Math.random() * 20) + 5;
                    question = `–ù–∞–π–¥–∏—Ç–µ –ø–ª–æ—â–∞–¥—å –∫—Ä—É–≥–∞ —Å —Ä–∞–¥–∏—É—Å–æ–º ${r} —Å–º. (œÄ ‚âà 3.14)`;
                    answer = (3.14 * r * r).toFixed(2);
                    hint = `S = œÄr¬≤`;
                    answerTypeText = "–û—Ç–≤–µ—Ç: –¥–µ—Å—è—Ç–∏—á–Ω–æ–µ —á–∏—Å–ª–æ (—Å–º¬≤)";
                } else if (i < 75) {
                    const angle = Math.floor(Math.random() * 80) + 10;
                    question = `–ß–µ–º—É —Ä–∞–≤–µ–Ω —Å–∏–Ω—É—Å —É–≥–ª–∞ ${angle}¬∞? (–æ—Ç–≤–µ—Ç –æ–∫—Ä—É–≥–ª–∏—Ç–µ –¥–æ –¥–≤—É—Ö –∑–Ω–∞–∫–æ–≤ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π)`;
                    answer = Math.sin(angle * Math.PI / 180).toFixed(2);
                    hint = `sin(–≥—Ä–∞–¥—É—Å—ã * œÄ/180)`;
                    answerTypeText = "–û—Ç–≤–µ—Ç: –¥–µ—Å—è—Ç–∏—á–Ω–æ–µ —á–∏—Å–ª–æ";
                } else if (i < 100) {
                    const a = Math.floor(Math.random() * 5) + 1;
                    const b = Math.floor(Math.random() * 3) + 1;
                    question = `–ù–∞–π–¥–∏—Ç–µ –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—É—é —Ñ—É–Ω–∫—Ü–∏–∏ f(x) = ${a}x¬≥ + ${b}x¬≤ –≤ —Ç–æ—á–∫–µ x = 2.`;
                    answer = (3 * a * 4 + 2 * b * 2).toFixed(2);
                    hint = `–ø—Ä–æ–∏–∑–≤–æ–¥–Ω–∞—è x^n = n*x^(n-1)`;
                    answerTypeText = "–û—Ç–≤–µ—Ç: –¥–µ—Å—è—Ç–∏—á–Ω–æ–µ —á–∏—Å–ª–æ";
                } else if (i < 125) {
                    const n = Math.floor(Math.random() * 10) + 5;
                    const k = Math.floor(Math.random() * (n-1)) + 1;
                    question = `–°–∫–æ–ª—å–∫–∏–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏ –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å ${k} —á–µ–ª–æ–≤–µ–∫ –∏–∑ ${n}? (–∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –±–µ–∑ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π)`;
                    let combinations = 1;
                    for (let j = 0; j < k; j++) { combinations *= (n - j); combinations /= (j + 1); }
                    answer = Math.round(combinations).toString();
                    hint = `C(n,k) = n!/(k!(n-k)!)`;
                    answerTypeText = "–û—Ç–≤–µ—Ç: —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ";
                } else {
                    const a = Math.floor(Math.random() * 50) + 10;
                    const b = Math.floor(Math.random() * 30) + 5;
                    const c = Math.floor(Math.random() * 20) + 1;
                    question = `–ï—Å–ª–∏ ${a} + ${b} = x, –∞ x - ${c} = y, —Ç–æ —á–µ–º—É —Ä–∞–≤–Ω–æ y?`;
                    answer = (a + b - c).toFixed(0);
                    hint = `–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ`;
                    answerTypeText = "–û—Ç–≤–µ—Ç: —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ";
                }
                mathQuestions.push({ id: i, text: question, answer: answer, hint: hint, section: section, points: points, difficulty: difficulty, answerType: answerTypeText, used: false });
            }
        }
        
        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (shuffle, showScreen, startTimer –∏ —Ç.–¥.) ‚Äî –≤—Å–µ –∏–∑ –æ—Ä–∏–≥–∏–Ω–∞–ª–∞
        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }
        
        function showScreen(screenName) {
            Object.values(screens).forEach(screen => screen.classList.remove('active'));
            screens[screenName].classList.add('active');
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        
        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º—ã (–∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–æ –ø–æ–¥ –Ω–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã)
        function toggleTheme() {
            document.body.classList.toggle('light-theme');
            const icon = themeToggle.querySelector('i');
            if (document.body.classList.contains('light-theme')) {
                icon.classList.remove('fa-sun');
                icon.classList.add('fa-moon');
            } else {
                icon.classList.remove('fa-moon');
                icon.classList.add('fa-sun');
            }
        }
        
        // –¢–∞–π–º–µ—Ä
        function startTimer() {
            startTime = Date.now();
            if (currentMode === 'marathon' && currentTimeLimit > 0) {
                timeLeft = currentTimeLimit * 60;
                timerInterval = setInterval(() => {
                    timeLeft--;
                    const minutes = Math.floor(timeLeft / 60);
                    const seconds = timeLeft % 60;
                    timerDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                    if (timeLeft < 60) { timerDisplay.style.color = 'var(--danger)'; timerDisplay.style.textShadow = '0 0 30px var(--danger)'; }
                    if (timeLeft <= 0) { clearInterval(timerInterval); endGame(); }
                }, 1000);
            } else {
                timerInterval = setInterval(() => {
                    const elapsed = Math.floor((Date.now() - startTime) / 1000);
                    const minutes = Math.floor(elapsed / 60);
                    const seconds = elapsed % 60;
                    quizTimerDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                }, 1000);
            }
        }
        
        function getQuestionsForGame() {
            let questionPool = currentSubject === 'physics' ? physicsQuestions : mathQuestions;
            let selectedQuestions = [];
            if (currentMode === 'quiz') {
                selectedQuestions = questionPool.filter(q => q.section === currentQuizSection && q.points === currentQuizPoints);
                selectedQuestions = shuffleArray(selectedQuestions).slice(0, 10);
                selectedQuestions.forEach(q => q.used = true);
            } else {
                questionPool = questionPool.filter(q => !q.used);
                if (questionPool.length < 150) { 
                    questionPool = currentSubject === 'physics' ? physicsQuestions : mathQuestions; 
                    questionPool.forEach(q => q.used = false); 
                }
                selectedQuestions = shuffleArray(questionPool).slice(0, 150);
                selectedQuestions.forEach(q => q.used = true);
            }
            return selectedQuestions;
        }
        
        function startMarathon() {
            score = 0; correctAnswers = 0; wrongAnswers = 0; currentQuestionIndex = 0; hintsUsed = 0;
            questions = getQuestionsForGame();
            currentQuestionDisplay.textContent = `1/${questions.length}`;
            currentScoreDisplay.textContent = '0';
            correctAnswersDisplay.textContent = '0';
            wrongAnswersDisplay.textContent = '0';
            timerDisplay.style.color = ''; timerDisplay.style.textShadow = '';
            showMarathonQuestion();
            if (timerInterval) clearInterval(timerInterval);
            startTimer();
            showScreen('question');
        }
        
        function showMarathonQuestion() {
            const q = questions[currentQuestionIndex];
            questionText.textContent = q.text;
            answerType.textContent = q.answerType;
            questionHint.textContent = `–ü–æ–¥—Å–∫–∞–∑–∫–∞: ${q.hint}`;
            questionHint.style.display = 'none';
            answerInput.value = '';
            answerFeedback.style.display = 'none';
            currentQuestionDisplay.textContent = `${currentQuestionIndex + 1}/${questions.length}`;
            answerInput.focus();
        }
        
        function checkMarathonAnswer() {
            const userAnswer = answerInput.value.trim();
            const correctAnswer = questions[currentQuestionIndex].answer;
            if (!userAnswer) {
                answerFeedback.textContent = '–í–≤–µ–¥–∏—Ç–µ –æ—Ç–≤–µ—Ç'; answerFeedback.className = 'answer-feedback incorrect'; answerFeedback.style.display = 'block'; return;
            }
            const normalizedUserAnswer = userAnswer.replace(',', '.');
            const normalizedCorrectAnswer = correctAnswer.replace(',', '.');
            let isCorrect = false;
            if (correctAnswer.includes('e')) {
                const userExp = parseFloat(userAnswer);
                const correctExp = parseFloat(correctAnswer);
                isCorrect = Math.abs(userExp - correctExp) / correctExp < 0.01;
            } else if (!correctAnswer.includes('.') || correctAnswer.endsWith('.00') || correctAnswer.endsWith('.0')) {
                isCorrect = parseInt(userAnswer) === parseInt(correctAnswer);
            } else {
                isCorrect = Math.abs(parseFloat(normalizedUserAnswer) - parseFloat(normalizedCorrectAnswer)) < 0.01;
            }
            if (isCorrect) {
                score += questions[currentQuestionIndex].points; correctAnswers++;
                answerFeedback.textContent = `‚úÖ +${questions[currentQuestionIndex].points} –±–∞–ª–ª–æ–≤`; answerFeedback.className = 'answer-feedback correct';
                currentScoreDisplay.textContent = score; correctAnswersDisplay.textContent = correctAnswers;
            } else {
                wrongAnswers++;
                answerFeedback.textContent = `‚ùå –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: ${correctAnswer}`; answerFeedback.className = 'answer-feedback incorrect';
                wrongAnswersDisplay.textContent = wrongAnswers;
            }
            answerFeedback.style.display = 'block';
            setTimeout(() => {
                if (currentQuestionIndex < questions.length - 1) { currentQuestionIndex++; showMarathonQuestion(); } else { endGame(); }
            }, 2000);
        }
        
        function showMarathonHint() { questionHint.style.display = 'block'; hintsUsed++; }
        
        function startQuiz() {
            quizQuestions = getQuestionsForGame();
            currentQuizQuestionIndex = 0; quizScore = 0; quizCorrectAnswers = 0; quizWrongAnswers = 0; startTime = Date.now();
            showQuizQuestion();
            if (timerInterval) clearInterval(timerInterval);
            startTimer();
            showScreen('quizQuestion');
        }
        
        function showQuizQuestion() {
            const q = quizQuestions[currentQuizQuestionIndex];
            quizQuestionText.textContent = q.text;
            quizAnswerType.textContent = q.answerType;
            quizQuestionHint.textContent = `–ü–æ–¥—Å–∫–∞–∑–∫–∞: ${q.hint}`;
            quizQuestionHint.style.display = 'none';
            quizAnswerInput.value = '';
            quizAnswerFeedback.style.display = 'none';
            document.getElementById('quizCurrentQuestion').textContent = `${currentQuizQuestionIndex + 1}/${quizQuestions.length}`;
            document.getElementById('quizCurrentScore').textContent = quizScore;
            document.getElementById('quizCorrectAnswers').textContent = quizCorrectAnswers;
            document.getElementById('quizWrongAnswers').textContent = quizWrongAnswers;
            quizAnswerInput.focus();
        }
        
        function checkQuizAnswer() {
            const userAnswer = quizAnswerInput.value.trim();
            const correctAnswer = quizQuestions[currentQuizQuestionIndex].answer;
            if (!userAnswer) {
                quizAnswerFeedback.textContent = '–í–≤–µ–¥–∏—Ç–µ –æ—Ç–≤–µ—Ç'; quizAnswerFeedback.className = 'answer-feedback incorrect'; quizAnswerFeedback.style.display = 'block'; return;
            }
            const normalizedUserAnswer = userAnswer.replace(',', '.');
            const normalizedCorrectAnswer = correctAnswer.replace(',', '.');
            let isCorrect = false;
            if (correctAnswer.includes('e')) {
                isCorrect = Math.abs(parseFloat(userAnswer) - parseFloat(correctAnswer)) / parseFloat(correctAnswer) < 0.01;
            } else if (!correctAnswer.includes('.') || correctAnswer.endsWith('.00') || correctAnswer.endsWith('.0')) {
                isCorrect = parseInt(userAnswer) === parseInt(correctAnswer);
            } else {
                isCorrect = Math.abs(parseFloat(normalizedUserAnswer) - parseFloat(normalizedCorrectAnswer)) < 0.01;
            }
            if (isCorrect) {
                quizScore += quizQuestions[currentQuizQuestionIndex].points; quizCorrectAnswers++;
                quizAnswerFeedback.textContent = `‚úÖ +${quizQuestions[currentQuizQuestionIndex].points} –±–∞–ª–ª–æ–≤`; quizAnswerFeedback.className = 'answer-feedback correct';
                document.getElementById('quizCurrentScore').textContent = quizScore;
                document.getElementById('quizCorrectAnswers').textContent = quizCorrectAnswers;
            } else {
                quizWrongAnswers++;
                quizAnswerFeedback.textContent = `‚ùå –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: ${correctAnswer}`; quizAnswerFeedback.className = 'answer-feedback incorrect';
                document.getElementById('quizWrongAnswers').textContent = quizWrongAnswers;
            }
            quizAnswerFeedback.style.display = 'block';
            setTimeout(() => {
                if (currentQuizQuestionIndex < quizQuestions.length - 1) { currentQuizQuestionIndex++; showQuizQuestion(); } else { endQuizGame(); }
            }, 2000);
        }
        
        function showQuizHint() { quizQuestionHint.style.display = 'block'; hintsUsed++; }
        
        function showScientists() {
            scientistsList.innerHTML = '';
            const scientists = currentSubject === 'physics' ? physicsScientists : mathScientists;
            scientists.forEach(s => {
                const card = document.createElement('div'); card.className = 'scientist-card';
                card.innerHTML = `<img src="${s.photo}" alt="${s.name}" class="scientist-photo"><div class="scientist-info"><h3 class="scientist-name">${s.name}</h3><p class="scientist-dates">${s.dates}</p><p class="scientist-discovery"><strong>–û—Ç–∫—Ä—ã—Ç–∏—è:</strong> ${s.discovery}</p></div>`;
                scientistsList.appendChild(card);
            });
        }
        
        function endQuizGame() {
            clearInterval(timerInterval);
            const totalQuestions = quizQuestions.length;
            const correctPercentage = totalQuestions > 0 ? Math.round((quizCorrectAnswers / totalQuestions) * 100) : 0;
            const elapsed = Math.floor((Date.now() - startTime) / 1000);
            const minutes = Math.floor(elapsed / 60);
            const seconds = elapsed % 60;
            const timeFormatted = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            finalScore.textContent = quizScore;
            finalCorrect.textContent = `${correctPercentage}%`;
            timeSpent.textContent = timeFormatted;
            correctCount.textContent = quizCorrectAnswers;
            wrongCount.textContent = quizWrongAnswers;
            setTimeout(() => { correctProgress.style.width = `${correctPercentage}%`; wrongProgress.style.width = `${100 - correctPercentage}%`; }, 300);
            showScientists(); scientistsContainer.style.display = 'block';
            resultTitle.textContent = `–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ö–≤–∏–∑–∞ –ø–æ ${currentSubject === 'physics' ? '—Ñ–∏–∑–∏–∫–µ' : '–º–∞—Ç–µ–º–∞—Ç–∏–∫–µ'}`;
            const recordKey = `${currentSubject}_quiz_record`;
            let record = localStorage.getItem(recordKey) || 0;
            if (quizScore > record) { record = quizScore; localStorage.setItem(recordKey, quizScore); }
            recordScore.textContent = record;
            showScreen('result');
        }
        
        function endGame() {
            clearInterval(timerInterval);
            const totalQuestions = questions.length;
            const correctPercentage = totalQuestions > 0 ? Math.round((correctAnswers / totalQuestions) * 100) : 0;
            const elapsed = Math.floor((Date.now() - startTime) / 1000);
            const minutes = Math.floor(elapsed / 60);
            const seconds = elapsed % 60;
            const timeFormatted = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            finalScore.textContent = score;
            finalCorrect.textContent = `${correctPercentage}%`;
            timeSpent.textContent = timeFormatted;
            correctCount.textContent = correctAnswers;
            wrongCount.textContent = wrongAnswers;
            setTimeout(() => { correctProgress.style.width = `${correctPercentage}%`; wrongProgress.style.width = `${100 - correctPercentage}%`; }, 300);
            showScientists(); scientistsContainer.style.display = 'block';
            resultTitle.textContent = `–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ú–∞—Ä–∞—Ñ–æ–Ω–∞ –ø–æ ${currentSubject === 'physics' ? '—Ñ–∏–∑–∏–∫–µ' : '–º–∞—Ç–µ–º–∞—Ç–∏–∫–µ'}`;
            const recordKey = `${currentSubject}_marathon_record`;
            let record = localStorage.getItem(recordKey) || 0;
            if (score > record) { record = score; localStorage.setItem(recordKey, score); }
            recordScore.textContent = record;
            showScreen('result');
        }
        
        function generateQuizGrid() {
            quizGridContainer.innerHTML = '';
            const sections = currentSubject === 'physics' ? ['–ú–µ—Ö–∞–Ω–∏–∫–∞', '–¢–µ—Ä–º–æ–¥–∏–Ω–∞–º–∏–∫–∞', '–≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ', '–û–ø—Ç–∏–∫–∞', '–ö–≤–∞–Ω—Ç—ã', '–Ø–¥–µ—Ä–∫–∞'] : ['–ê–ª–≥–µ–±—Ä–∞', '–ì–µ–æ–º–µ—Ç—Ä–∏—è', '–¢—Ä–∏–≥–æ–Ω–æ–º–µ—Ç—Ä–∏—è', '–ú–∞—Ç–∞–Ω–∞–ª–∏–∑', '–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å', '–õ–æ–≥–∏–∫–∞'];
            const points = [10, 20, 30, 40, 50];
            for (let section = 0; section < 6; section++) {
                for (let pIdx = 0; pIdx < 5; pIdx++) {
                    const cell = document.createElement('div'); cell.className = 'quiz-cell';
                    cell.dataset.section = section; cell.dataset.points = points[pIdx];
                    cell.innerHTML = `<h4>${sections[section]}</h4><p>${points[pIdx]}</p><small>–±–∞–ª–ª–æ–≤</small>`;
                    cell.addEventListener('click', () => {
                        document.querySelectorAll('.quiz-cell').forEach(c => c.classList.remove('selected'));
                        cell.classList.add('selected');
                        currentQuizSection = section; currentQuizPoints = points[pIdx];
                        document.getElementById('startSelectedQuiz').disabled = false;
                    });
                    quizGridContainer.appendChild(cell);
                }
            }
        }
        
        function init() {
            generateQuestions();
            themeToggle.addEventListener('click', toggleTheme);
            
            document.querySelectorAll('.selection-card[data-subject]').forEach(card => {
                card.addEventListener('click', () => { currentSubject = card.dataset.subject; showScreen('mode'); });
            });
            document.querySelectorAll('.selection-card[data-mode]').forEach(card => {
                card.addEventListener('click', () => {
                    currentMode = card.dataset.mode;
                    if (currentMode === 'marathon') {
                        marathonSubject.textContent = currentSubject === 'physics' ? '—Ñ–∏–∑–∏–∫–µ' : '–º–∞—Ç–µ–º–∞—Ç–∏–∫–µ';
                        showScreen('time');
                    } else {
                        quizSubjectName.textContent = currentSubject === 'physics' ? '—Ñ–∏–∑–∏–∫–µ' : '–º–∞—Ç–µ–º–∞—Ç–∏–∫–µ';
                        generateQuizGrid();
                        document.querySelectorAll('.quiz-cell').forEach(c => c.classList.remove('selected'));
                        document.getElementById('startSelectedQuiz').disabled = true;
                        showScreen('quiz');
                    }
                });
            });
            document.querySelectorAll('.time-option').forEach(option => {
                option.addEventListener('click', function() {
                    document.querySelectorAll('.time-option').forEach(o => o.classList.remove('selected'));
                    this.classList.add('selected');
                    currentTimeLimit = parseInt(this.dataset.minutes);
                });
            });
            
            document.getElementById('backToMain').addEventListener('click', () => showScreen('main'));
            document.getElementById('backToMode').addEventListener('click', () => showScreen('mode'));
            document.getElementById('backToModeFromQuiz').addEventListener('click', () => showScreen('mode'));
            document.getElementById('startMarathon').addEventListener('click', () => { if (currentTimeLimit > 0) startMarathon(); else alert('–í—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º—è'); });
            document.getElementById('startSelectedQuiz').addEventListener('click', startQuiz);
            submitAnswer.addEventListener('click', checkMarathonAnswer);
            hintButton.addEventListener('click', showMarathonHint);
            answerInput.addEventListener('keypress', (e) => { if (e.key === 'Enter') checkMarathonAnswer(); });
            quizSubmitAnswer.addEventListener('click', checkQuizAnswer);
            quizHintButton.addEventListener('click', showQuizHint);
            quizAnswerInput.addEventListener('keypress', (e) => { if (e.key === 'Enter') checkQuizAnswer(); });
            document.getElementById('restartButton').addEventListener('click', () => { if (currentMode === 'quiz') showScreen('quiz'); else showScreen('time'); });
            document.getElementById('backToMainFromResults').addEventListener('click', () => showScreen('main'));
        }
        
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
